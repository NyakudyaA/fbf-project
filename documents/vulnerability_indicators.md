# Vulnerability Indicators

In this section we look at approaches we investigated to classify buildings (in particular OSM buildings) according to their vulnerability. Our approach is to use easily available datasets and continually refine by adding / removing indicators. Scoring of buildings using indicators according to vulnerability criteria was done as a pre-processing step as part of the exposure data preparation process.

## Overview of Indicators

Indicators are factors that make a building and its inhabitants more or less vulnerable to a flood hazard. For the initial proof of concept, we identified the following seven indicators. These will be reduced / adjusted in the final version.

- Building type 
- Building material 
- Building area (footprint size) 
- Proximity to river 
- Low lying areas (elevation) 
- Road network density (as a proxy for poverty) 
- Land use 

The selection of these indicators was based on expert input from Ahmadul Hassan, our hydrological modelling specialist. In our methodology, we can refine, remove, add to and weight these factors over time as our access to data and insight changes.

In particular, the first three indicators are definite vulnerability indicators while the others are more likely to be treated only as risk indicators.

The relative weighting of indicators is implicit in the scoring system used. All indicators are scored using a number in the range [0,1]. If one indicator is deemed to have a lower importance a smaller range can be used to indicate this.  In the following sections we discuss these indicators in detail.

### Building type

We use the following protocol to establish vulnerability indicator scores based on building type:

| Building type      | Score |
|--------------------|-------|
| House/Residential  | 1.0   |
| School/Educational | 1.0   |
| Office/Business    | 0.7   |
| Sports Facility    | 0.3   |
| Unknown            | 0.3   |

The OSM buildings have a generic classification. We use database triggers to reclassify the building_type class. This will be further recoded to match the categories for the buildings.

### Building material

We use the following protocol to establish vulnerability indicator scores based on building material. 

| Building material | Score |
|-------------------|-------|
| Mud               | 1.0   |
| Brick             | 0.5   |
| Concrete          | 0.1   |
| Unknown           | 0.3   |

The OSM buildings have a generic classification. We use database triggers to reclassify the building_material class. This will be further recoded to match the categories for the buildings.

### Building footprint area

Building area can indicate the relative social wellbeing of the inhabitants of the building. We assume that smaller buildings are owned by lower income people and larger buildings by higher income. 

| Building area m2 | Score |
|------------------|-------|
| <= 100           | 1.0   |
| 100 – 300        | 0.7   |
| 300 – 500        | 0.5   |
| > 500            | 0.3   |
| Unknown          | 0.3   |

We calculate the area of each structure using SQL and a trigger in PostGIS. Whenever a record is inserted or updated, the cell is recalculated. 

### Proximity to river

Structures close to rivers that are flood prone are likely more vulnerable to damage / inundation from flood waters. With this approach we can calculate the distance from the centroid of each building to the nearest river reach and score buildings as having a higher vulnerability when close to the river, lower when further away. 

We use the following protocol to establish expsoure indicator scores based on building distance to river. 

| Building distance to river | Score |
|----------------------------|-------|
| 0 - 100m                   | 1.0   |
| 101- 300m                  | 0.7   |
| 301 – 500m                 | 0.5   |
| >501m                      | 0.3   |
| Unknown                    | 0.3   |

For calculating buildings proximity to the nearest river segment, we perform the following spatial analysis: 

- Obtain the centroid of the structure 
- Find the nearest river segment to the centroid 
- Calculate the length of the distance 

### Low lying areas

Low lying areas are at risk of flooding if a river overflows its banks. The buildings at an elevation below or close to the elevation of the river bank are susceptible.

We use the following protocol to establish vulnerability indicator scores based on vertical proximity to rivers.

| Building vertical distance to river | Score |
|-------------------------------------|-------|
| <= 0m                               | 1.0   |
| 0m – 1m                             | 0.8   |
| 1m – 2m                             | 0.5   |
| > 2m                                | 0.1   |
| Unknown                             | 0.3   |

We will use the following datasets to generate these indicators: 

- Rivers: OpenStreetMap Rivers 
- Buildings: OpenStreetMap Buildings 
- Elevation Map: SRTM 

We will aim to replace OSM rivers with national Indonesian rivers layer when it is available.  

For calculating buildings in low lying areas, we perform the following spatial analysis:
 
- Obtain the centroid of the structure 
- Identify the point on the nearest river line to the structure centroid 
- Look up the height of (1) above using PGRaster and SRTM or national DEM
- Look up the height of (2) above using PGRaster and SRTM or national DEM
- Calculate the height difference between the structure centroid height (3) and the nearest riverline point height (4). Negative numbers indicate the building is below the river. Positive indicate it is above.
- Scale the result from (3) above according to the vulnerability indicator table (see below).  

Since the building data is being mirrored from OSM in a PostgreSQL / PostGIS database, we use two additional fields on the buildings table to represent these data: 

- vertical_river_distance (float) 
- low_lying_area_score (int) 

The scoring is calculated using the scoring table below. Separating the absolute distance from the scoring allows us to recalibrate the scoring in the future without needing to recapture the vertical distance again.

### Road network density

The density of road infrastructure around a house and the type of roads around the house can provide an indication of the vulnerability of the house and its inhabitants. A house far from infrastructure may be isolated and the lead times in getting emergency services to the inhabitants higher. Initially we will factor in all roads, in future we might weight the scoring with the type as well as the length of roads that surround it. 

| Building vertical distance to river | Score |
|-------------------------------------|-------|
| 0m                                  | 1.0   |
| 0m – 1m                             | 0.8   |
| 1m – 2m                             | 0.5   |
| > 2m                                | 0.1   |
| Unknown                             | 0.3   |

For calculating road density around each building, we perform the following spatial analysis: 

- Obtain the centroid of the structure 
- Create a grid/polygon on certain size (eg 100x100m) for each building 
- For each grid, clip highway/road layer using the grid as the overlay layer 
- Calculate the total length of the resulted clipped roads  